



@{
    ViewData["Title"] = "General";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="card card-success main-card card">


    <div class="card-body card-body" style="font-size:11px">
        <div class="row">
            <div class="col-xl-12">
                <h3 class="text-center">REPORTE GENERAL</h3>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12">

                <div class="input-group input-group-sm mb-1">
                    <div class="input-group-prepend">
                        <label class="input-group-text">ESTADO</label>
                    </div>
                    <select class="custom-select" id="cmbEstado" style="width:285px">
                        <option value="">[SELECCIONE]</option>
                        @foreach (var item in ViewBag.estadopedido)
                        {
                            <option value="@item.idestado">@item.descripcion</option>
                        }
                    </select>
                </div>
                @if (User.IsInRole("ADMINISTRADOR") || User.IsInRole("ACCESO A TODAS LAS SUCURSALES"))
                {<div class="input-group input-group-sm mb-1">
                        <div class="input-group-prepend">
                            <label class="input-group-text">SUCURSAL</label>
                        </div>
                        <select class="custom-select" id="cmbSucursal" style="width:285px" tipo="select">
                            <option value="" selected>[SELECCIONE]</option>
                        </select>
                    </div>
                    <div class="input-group input-group-sm mb-1">
                        <div class="input-group-prepend">
                            <label class="input-group-text">EMPRESA</label>
                        </div>
                        <select class="custom-select" id="cmbTipoEmpresa" style="width:285px">
                            <option value="" selected>[SELECCIONE]</option>
                            @foreach (var item in ViewBag.empresas)
                            {
                                <option value="@item.idempresa">@item.descripcion</option>
                            }
                        </select>
                    </div>
                }
                else
                {
                    <input id="cmbSucursal" value="@ViewBag.IDSUCURSAL" type="hidden" />
                    <input id="cmbTipoEmpresa" type="hidden" />
                }
                <div class="input-group input-group-sm mb-1">
                    <div class="input-group-prepend">
                        <label class="input-group-text">TIPO DE PEDIDO</label>
                    </div>
                    <select class="custom-select" id="cmbTipoPedido" style="width:285px">
                        <option value="" selected>[SELECCIONE]</option>
                        @foreach (var item in ViewBag.tipopedido)
                        {
                            <option value="@item.idtipopedido">@item.descripcion</option>
                        }
                    </select>
                </div>


            </div>
            <div class="col-lg-4 col-md-12">
                <div class="input-group input-group-sm mb-1">
                    <div class="input-group-prepend">
                        <label class="input-group-text">T. FORMULACION</label>
                    </div>
                    <select class="custom-select" id="cmbtipoformulacion" style="width:285px">
                        <option value="">[TODOS]</option>
                        @foreach (var item in ViewBag.tipoformulacion)
                        {
                            <option value="@item.idtipoformulacion">@item.descripcion</option>
                        }
                    </select>
                </div>
                <div class="input-group input-group-sm mb-1">
                    <div class="input-group-prepend">
                        <label class="input-group-text">TIPO DE PRODUCTO</label>
                    </div>
                    <select class="custom-select" id="cmbtipoproducto" style="width:285px">
                        <option value="">[TODOS]</option>
                        @foreach (var item in ViewBag.tipoproducto)
                        {
                            <option value="@item.idtipoproducto">@item.descripcion</option>
                        }
                    </select>
                </div>
                <div class="input-group input-group-sm mb-1">
                    <div class="input-group-prepend">
                        <label class="input-group-text">RANGO DE FECHA</label>
                    </div>
                    <input type="text" class="form-control" id="txtfecharango" autocomplete="off" />
                </div>
                <div class="form-inline">
                    <div class="input-group input-group-sm mb-1">
                        <div class="input-group-prepend">
                            <label class="input-group-text">HORAR INICIO</label>
                        </div>
                        <input type="time" class="form-control" id="txthorainicio" value="06:00" style="width:110px" />
                    </div>
                    <div class="input-group input-group-sm mb-1">
                        <div class="input-group-prepend">
                            <label class="input-group-text">HORA FIN</label>
                        </div>
                        <input type="time" class="form-control" id="txthorafin" value="23:00" style="width:110px" />
                    </div>
                </div>

            </div>
            <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12">


                <div class="input-group mb-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text form-control-sm" style="height:30px;width:120px">VENDEDOR</span>
                    </div>
                    <input type="hidden" id="txtdocempleado" />
                    <input type="text" class="form-control form-control-sm" id="txtnombresVendedor" disabled>
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="button" id="btnBuscarVendedor"><i class="fa fa-search"></i></button>
                    </div>
                </div>

                <div class="input-group mb-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text form-control-sm" style="height:30px;width:120px">  MÉDICO</span>
                    </div>
                    <input type="hidden" id="txtcolegiaturamedico" />
                    <input type="text" class="form-control form-control-sm" id="txtnombremedico" disabled>
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="button" id="btnBuscarMedico"><i class="fa fa-search"></i></button>
                    </div>
                </div>

                <div class="input-group mb-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text form-control-sm" style="height:30px;width:120px">PACIENTE</span>
                    </div>
                    <input type="hidden" id="txtdocpaciente" />
                    <input type="text" class="form-control form-control-sm" id="txtnombrePaciente" disabled>
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="button" id="btnbuscarpaciente"><i class="fa fa-search"></i></button>
                    </div>
                </div>

                <div class="input-group mb-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text form-control-sm" style="height:30px;width:120px">O. RECETA</span>
                    </div>
                    <input type="hidden" id="txtidorigenreceta" />
                    <input type="text" class="form-control form-control-sm" id="txtnombreorigen" disabled>
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="button" id="btnBuscarRecetaorigen"><i class="fa fa-search"></i></button>
                    </div>
                </div>
                <div class="input-group mb-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text form-control-sm" style="height:30px;width:120px">CLIENTE</span>
                    </div>
                    <input type="hidden" id="txtdoccliente" />
                    <input type="text" class="form-control form-control-sm" id="txtnombrecliente" disabled>
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="button" id="btnbuscarcliente" data-toggle="modal" data-target="#modalclientes"><i class="fa fa-search"></i></button>
                    </div>
                </div>

                <button class="btn btn-primary btn-block " onclick="limpiar()">LIMPIAR</button>

            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                <div class="btn-group  text-center">
                    <button class="btn btn-info " id="btnConsultar" onclick="getReporteGeneral()">CONSULTAR</button>
                    @*<button class="btn btn-info " id="btnConsultar" onclick="getReporteGeneralprueba()">CONSULTAR PRUEBA</button>*@
                    <button class="btn btn-success " id="btnExportar" @*onclick="exportTableToExcel()"*@>EXPORTAR</button>
                    @*<button class="btn btn-success" id="btnprueba" onclick="pruebadescargarprogres()">prueba EXPORTAR</button>*@

                </div>

            </div>
        </div>
    </div>
</div>
<style>
    table.dataTable.dataTable_width_auto {
        width: auto;
    }
</style>
<div class="card card-success main-card card mt-2" id="cardreport">
    <div class="card-body card-body text-center">
        <div class="row">
            <div class="col">
                <button type="button" class="btn btn-primary">
                    N° REGISTROS <span class="badge badge-light" id="numRegistros">0</span>
                </button>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12 table-responsive">
                <table class="table   table-sm table-bordered" id="tblReportes">
                    <thead class="thead-dark " style="font-size:10px">
                        <tr>
                            <th>ID</th>
                            <th>N° PEDIDO</th>
                            <th>SUCURSAL</th>
                            <th>FECHA</th>
                            <th>FECHA FACT.</th>

                            <th>VENDEDOR</th>
                            <th>CLIENTE</th>
                            <th>PACIENTE</th>
                            <th>COSTO</th>
                            <th>CODIGO</th>
                            <th>FORMULA-MAGISTRAL</th>
                            <th>CANT.</th>
                            <!--th>I</th!-->
                            <th>ESTADO</th>
                            <th>N° DOC</th>
                            <th>ORDEN P.</th>
                            <th>MEDICO</th>
                            <th>CMP</th>
                            <th>ORIGEN RECETA</th>
                            <th>TIPO PEDIDO</th>
                            <th>TIPO EMPRESA</th>
                        </tr>
                    </thead>
                    <tbody class="font-9"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>




<!--<div class="card card-success main-card card mt-2" id="cardreport1">
    <div class="card-body card-body text-center">

        <div class="row">
            <div class="col-lg-12 table-responsive">
                <table class="table   table-sm table-bordered" id="tblReporteprueba">
                    <thead class="thead-dark" style="font-size:10px">
                        <tr>
                            <th>ID</th>
                            <th>N° PEDIDO</th>
                            <th>SUCURSAL</th>
                            <th>FECHA</th>
                            <th>FECHA FACT.</th>
                            <th>VENDEDOR</th>
                            <th>CLIENTE</th>
                            <th>PACIENTE</th>
                            <th>COSTO</th>
                            <th>CODIGO</th>
                            <th>FORMULA-MAGISTRAL</th>
                            <th>CANT.</th>-->
<!--th>I</th!-->
<!--<th>ESTADO</th>
                            <th>N° DOC</th>
                            <th>ORDEN P.</th>
                            <th>MEDICO</th>
                            <th>CMP</th>
                            <th>ORIGEN RECETA</th>
                            <th>TIPO PEDIDO</th>
                            <th>TIPO EMPRESA</th>
                        </tr>
                    </thead>
                    <tbody class="font-9"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>-->








<iframe name="hiddenFrame" style="display: none;"></iframe>



<script src="~/js/areas/pedidos/pedidos/reportes/general.js"></script>

<partial name="~/Areas/Maestros/Views/OrigenReceta/modal/_modalbuscarorigenreceta.cshtml" />
<partial name="~/Areas/Maestros/Views/Cliente/modal/modalbusquedayregistrocliente.cshtml" />
<partial name="~/Areas/Maestros/Views/Paciente/modal/modalbusquedayregistropaciente.cshtml" />
<partial name="~/Areas/Maestros/Views/Medico/modal/_modalbuscarmedicos.cshtml" />
<partial name="~/Areas/Administrador/Views/Empleado/modal/_modalempleados.cshtml" />

<script src="~/js/controller/maestros/MedicoController.js"></script>
<script src="~/js/controller/maestros/ColegioController.js"></script>
<script src="~/js/controller/maestros/PacienteController.js"></script>