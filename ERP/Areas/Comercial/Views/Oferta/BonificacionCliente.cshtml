@model ENTIDADES.comercial.Oferta
@{
    ViewData["Title"] = "Crear";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<form id="formregistro" autocomplete="off">

    <div class="row justify-content-center">
        <div class="col-xl-10">
            <div class="card">
                <div class="card-header text-center bg-green">
                    <h6>MANTENIMIENTO DE OFERTAS</h6>
                </div>

                <div class="card-body">

                    <div class="row">
                        <div class="col-xl-2 col-md-4 col-sm-12">
                            <label>CODIGO</label>
                            <div class="input-group input-group-sm mb-3">
                                <div class="input-group-prepend">
                                    <input type="text" asp-for="idoferta" class="form-control form-control-sm" id="txtid" />

                                    <button type="button" id="btnbuscaroferta" class="btn btn-dark"><i class="fas fa-search"></i></button>


                                </div>
                            </div>
                        </div>
                        <div class="col-xl-10 col-md-8 col-sm-12">
                            <label>NOMBRE</label>
                            <input type="text" asp-for="nombre" class="form-control form-control-sm text-uppercase" id="txtnombre" required />
                        </div>
                        <div class="col-xl-4 col-sm-12">
                            <label>TIPO</label>
                            <select class="form-control form-control-sm" asp-for="tipo" id="cmbtipo" required>
                                <option value="MONTO" selected>Por monto</option>
                                <option value="CANTIDAD" selected>Por cantidad / Volumen</option>
                            </select>
                        </div>
                        <div class="col-xl-6 col-md-8 col-sm-12">
                            <label>RANGO DE FECHAS</label>
                            <div class="input-group input-group-sm mb-3">
                                <div class="input-group-prepend">
                                    <span class="input-group-text ">DEL</span>
                                    <input type="date" class="form-control" id="txtfechainicio" asp-for="fechainicio" required>
                                    <span class="input-group-text">AL</span>
                                    <input type="date" class="form-control" id="txtfechafin" asp-for="fechafin" required>

                                </div>
                            </div>
                        </div>
                        <div class="col-xl-2 col-sm-12">
                            <label>ESTADO</label>
                            <select class="form-control form-control-sm" asp-for="estado" id="cmbestado" required>
                                <option value="HABILITADO" selected>HABILITADO</option>
                                <option value="DESHABILITADO">DESHABILITADO</option>
                            </select>
                        </div>
                    </div>

                </div>
                <div class="card-footer text-center">
                    <button class="btn btn-outline-success" type="submit" id="btnguardar"><i class="fas fa-save mr-2"></i>GUARDAR</button>
                    <button class="btn btn-outline-info" type="button" id="btnlimpiar"><i class="fas fa-redo mr-2"></i>LIMPIAR</button>
                    <button class="btn btn-dark ml-5" type="button" id="btnasignarsucursal"><i class="far fa-building mr-2"></i>ASIGNAR SUCURSAL</button>

                </div>
            </div>
        </div>

    </div>
    <div class="row">
        <div class="col-xl-3 col-sm-12 col-md-6">
            <div class="card">
                <div class="card-body">
                    <div class="nav flex-column nav-pills" id="tabs" role="tablist" aria-orientation="vertical">
                        <a class="nav-link active" id="tab-detalle" data-toggle="pill" href="#tab-detalle-content" role="tab">DETALLE</a>
                        <a class="nav-link" id="tab-oferta" data-toggle="pill" href="#tab-oferta-content" role="tab">OFERTA</a>

                    </div>
                </div>
            </div>

        </div>
        <div class="col-xl-9 col-sm-12 col-md-6">
            <div class="tab-content" id="v-pills-tabContent">
                <div class="tab-pane fade show active" id="tab-detalle-content" role="tabpanel">
                    <div class=" card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-xl-10">
                                    <label>DETALLE</label>
                                </div>
                                <div class="col-xl-2">
                                    <button class="btn  btn-secondary" type="button" id="btnadditemdetalle"><i class="fas fa-plus"></i></button>

                                </div>

                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row justify-content-end">
                                <div class="col-xl-12">
                                    <div class="table-responsive contenedor-sticky-300">
                                        <table class="table table-sm table-bordered" width="100%" id="tbldetalle">
                                            <thead class="thead-dark">

                                                <tr>
                                                    @*<th style="width:5%">N</th>*@
                                                    <th style="width:15%">Cod</th>
                                                    <th style="width:45%">Producto</th>
                                                    <th style="width:20%">Lab</th>
                                                    <th style="width:5%">F</th>
                                                    <th style="width:15%">Cantidad</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbodydetalle">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="tab-oferta-content" role="tabpanel">
                    <div class=" card">
                        <div class="card-header">
                            <div class="row">
                                <div class="col-xl-10">
                                    <label>OFERTA</label>
                                </div>
                                <div class="col-xl-2">
                                    <button class="btn  btn-secondary" type="button" id="btnadditemobsequio"><i class="fas fa-plus"></i></button>
                                </div>

                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row justify-content-end">
                                <div class="col-xl-12">
                                    <div class="table-responsive contenedor-sticky-300">
                                        <table class="table table-sm table-bordered" width="100%" id="tbloferta">
                                            <thead class="thead-dark">
                                                <tr>
                                                    @* <th style="width:5%">N</th>*@
                                                    <th style="width:15%">Cod</th>
                                                    <th style="width:40%">Producto</th>
                                                    <th style="width:20%">Lab</th>
                                                    <th style="width:5%">F</th>
                                                    <th style="width:10%">Cantidad</th>
                                                    <th style="width:10%">Dscto</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody id="tbdoyoferta">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</form>
<div class="modal fade" id="modalasignarsucursal" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog   modal-dialog-scrollable" role="document">
        <div class="modal-content">
            <div class="modal-header bg-blue">
                <label class="modal-title" id="staticBackdropLabel">ASIGNAR OFERTA</label>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body ">
                <div class="card">
                    <div class="card-body">
                        <table class="table table-sm table-bordered" width="100%" id="tblsucursal">
                            <thead class="thead-dark">
                                <tr>
                                    <th style="width:80%">Sucursal</th>
                                    <th style="width:10%">
                                        <div class="form-inline">
                                            <input type="checkbox" id="checkallsucursal" />
                                            <button id="btnguardarofertassucubloque"><i class="fas fa-save"></i></button>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>


            </div>
            <div class="modal-footer">

            </div>
        </div>
    </div>
</div>
<partial name="~/Areas/Almacen/Views/AProducto/modal/_modalproductos.cshtml" />
<partial name="~/Areas/Comercial/Views/Oferta/modal/_modalofertas.cshtml" />
<script src="~/js/areas/comercial/ofertas/mantenimiento.js"></script>
<script src="~/js/modelos/comercial/Oferta.js"></script>
<script src="~/js/controller/comercial/OfertaController.js"></script>