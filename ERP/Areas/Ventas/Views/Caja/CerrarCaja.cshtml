
@{
    ViewData["Title"] = "CerrarCaja";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script>
        var _CAJAABIERTA = null;
             _CAJAABIERTA = @Html.Raw(Json.Serialize(ViewBag.verificarcaja.objeto));
</script>
@if (ViewBag.verificarcaja.mensaje == "ok")
{
    <div class="row justify-content-center">
        <div class="col-xl-4 col-sm-6 ">
            <div class="card">
                <div class="card-header bg-green text-center">
                    <h6>DATOS DE CAJA</h6>
                </div>

                <div class="card-body">
                    <div class="form-group">
                        <label>FECHA APERTURA</label>
                        <input type="text" class="form-control form-control-sm" id="txtfechaapertura" disabled />
                    </div>
                    <div class="form-group">
                        <label>CAJA</label>
                        <input type="hidden" id="txtidcaja" />
                        <input type="text" class="form-control form-control-sm" id="txtnombrecaja" readonly required />
                    </div>
                    <div class="form-group">
                        <label>USUARIO APERTURA</label>
                        <input type="text" class="form-control form-control-sm" id="txtusuarioapertura" disabled />
                    </div>
                    <div class="form-group">
                        <label>USUARIO DE CIERRE</label>
                        <input type="text" class="form-control form-control-sm" value="@ViewBag.NOMBREUSUARIO" disabled />
                    </div>
                </div>
               


            </div>

        </div>
        <div class="col-xl-8 col-sm-12">
            <div class="card">
                <div class="card-header bg-green">
                    <h6>VENTAS REALIZADAS</h6>
                </div>
                <div class="card-body">
                    <table width="100%" class="table table-sm table-bordered font-13" id="tblmontos">
                        <thead class="">
                            <tr>
                                <th>FECHA</th>
                                <th>CAJA</th>
                                <th>MONEDA</th>
                                <th>TIPO </th>
                                <th class="text-left" style="width:10%">NUM VENTAS</th>
                                @*<th class="text-left" style="width:15%">TOTAL SISTEMA</th>*@
                                <th class="text-left" style="width:10%">TOTAL USUARIO</th>
                            </tr>
                        </thead>
                        <tbody id="tblbodydetalle"></tbody>
                    </table>
                    <div class="form-group">
                        <label>OBSERVACIONES</label>
                        <textarea rows="5" cols="10" id="txtobservaciones" class="mt-2 form-control"></textarea>

                    </div>
                </div>
                <div class="card-footer">
                    <div class="row justify-content-center text-center">
                        <div class="col-xl-2 col-md-3 col-sm-6">
                            <button class="btn btn-sm btn-danger btn-block ocultar" id="btndescargarreporte"><i class="fas fa-file-pdf"></i></button>
                        </div>
                        <div class="col-xl-2 col-md-3 col-sm-6">
                            <button class="btn btn-sm btn-outline-primary btn-block" id="btnprecierre">PRE CIERRE</button>
                        </div>
                        <div class="col-xl-2 col-md-3 col-sm-6">
                            <button class="btn btn-sm btn-success btn-block" id="btncerrarcaja">CERRAR CAJA</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <div class="row justify-content-center">
        <div class="col-xl-4 col-sm-6 ">
            <div class="card">
                <div class="card-header bg-green text-center">
                    <h6>CERRAR CAJA</h6>
                </div>
                <div class="card-body">
                    <div class="alert-warning" style="color:black; padding:50px;margin:50px; font-size:1.2rem" role="alert">
                        <h4 class="alert-heading">ADVERTENCIA</h4>
                        UD. no ha aperturado caja. <a asp-area="Ventas" asp-controller="Caja" asp-action="AperturarCaja">Aperturar caja</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
   

}
<script src="~/js/areas/ventas/caja/cerrarcaja.js"></script>
<script src="~/js/modelos/venta/CerrarCaja.js"></script>